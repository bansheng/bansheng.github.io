---
title: 广告投放系统简介
top: true
cover: false
oc: true
mathjax: true
date: 2022-02-08 20:13:52
password:
summary:
tags:
    - ads
categories:
    - 技术
---

本文主要介绍了广告算法入门的一些基础知识。主要介绍了广告投放漏斗的几个部分承担的功能、各自的特点以及常见的一些算法。

<!-- more -->

所谓搜广推是一家，本质上来说，[推荐/广告]和[搜索]的所使用的技术都是非常类似的，不同的是搜索有个很强的query特征（用户自己输入的信息，比如你去淘宝上面搜索的商品名称），而推荐或者广告的缺少query特征，只能从**用户特征/商品特征/上下文特征/历史行为特征**中对用户的兴趣进行挖掘。
广告系统按照漏斗的形式，从数百数千万候选广告中，对用户的每一刷（以抖音为例）筛选出几十个广告，然后发送给用户。

广告投放系统的漏斗大致可以分为 [定向/召回/粗排/精排/混排] 5个部分，有些系统可能没有混排，或者把粗排精排放在一起（当系统候选规模较小的时候）。

## 1. 定向

广告主设定广告面向的人群对象筛选条件，结合业务上对每个用户可投广告的控制（流控、频控、其它规则）对广告全集进行筛选。
一般受制于latency（系统耗时），我们选择定向与召回结果取交集送粗排。
定向的基本检索方式为建立倒排索引，map<filed, map<value, bitmap> >。
![](https://s2.loli.net/2022/02/09/N8eOyfJzvIkbS7a.png)
bitmap中的每一个bit，对应一个广告id，几个规则索引一起按位取交集，得到定向的结果candidate广告。
